<html>
  <head>
    <title>Survivor Draft Inputs - A True Commishportunity</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  <body>
    <label>JDM</label>
    <div id="Justis">
      <input></input><button class="btn btn-primary submit">Submit</button>
    </div>
    <label>MAX</label>
    <div id="Max">
      <input></input><button class="btn btn-primary submit">Submit</button>
    </div>
    <label>MSN</label>
    <div id="Marshawn">
      <input></input><button class="btn btn-primary submit">Submit</button>
      <button class="btn btn-primary plus" add-val="1">+1</button>
      <button class="btn btn-primary plus" add-val="3">+3</button>
      <button class="btn btn-primary plus" add-val="5">+5</button>
      <button class="btn btn-primary plus" add-val="6">+6</button>
      <button class="btn btn-primary plus" add-val="10">+10</button>
      <button class="btn btn-primary plus" add-val="20">+20</button>
    </div>
    <label>MF</label>
    <div id="Alec">
      <input></input><button class="btn btn-primary submit">Submit</button>
    </div>
  </body>
</html>

<script>
  $(document).ready(function() {
    $(".submit").on("click", function(){
      updateScore($(this).parent().attr("id"), $("#" + $(this).parent().attr("id") + " input").val());
    });

    $(".plus").on("click", function() {
      var playerNameString = $(this).parent().attr("id");
      updateScore(playerNameString, scores[playerNameString] + this.attr("add-val"));
    });
  });
</script>

<script>
  var scores = {
    Justis: 0,
    Alec: 0,
    Marshawn: 0,
    Max: 0,
  }

  var HOST = location.origin.replace(/^http/, 'ws')
  var ws = new WebSocket(HOST);

  ws.onmessage = function (event) {
    var splitData = event.data.split(":");
    var name = splitData[0];
    var score = splitData[1];
    if (name === "Justis") {
      scores.Justis = score;
    } else if (name === "Alec") {
      scores.Alec = score;
    } else if (name === "Marshawn") {
      scores.Marshawn = score;
    } else if (name === "Max") {
      scores.Max = score;
    }
  };

  function updateScore(person, score) {
    ws.send(person + ":" + score);
  }
</script>
